<div style="margin-top: -20px;">
  <div class="table-responsive" style="background: #ffffff; padding: 10px">
    <br><h2 style="color:#565656">KPI ARCHIVIATI</h2><br>
    <h4 style="color:#565656; margin-left:12%">Periodo:</h4>
    <div class="row">
      <input type="text" class="form-control ml-3" style="width:10%;" placeholder="KPI Name" #searchCol1 />
      <select [(ngModel)]="monthVar" class="form-control ml-3" style="width:15%;" #searchCol2>
        <option value="">Mese</option>
        <option value="01">Gennaio</option>
        <option value="02">Febbraio</option>
        <option value="03">Marzo</option>
        <option value="04">Aprile</option>
        <option value="05">Maggio</option>
        <option value="06">Giugno</option>
        <option value="07">Luglio</option>
        <option value="08">Agosto</option>
        <option value="09">Settembre</option>
        <option value="10">Ottobre</option>
        <option value="11">Novembre</option>
        <option value="12">Dicembre</option>
      </select>
      <select [(ngModel)]="yearVar" class="form-control ml-1" style="width:15%;" #searchCol3>
        <option value="">Anno</option>
        <option value="2019">2019</option>
        <option value="2020">2020</option>
        <option value="2021">2021</option>
      </select>
      <button type="button" class="btn btn-primary ml-3" (click)="populateDateFilter()">Filter</button>
    </div><br/>
    <table class="table table-bordered" #ArchivedkpiTable datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
      <thead style="background: #E6E6E6">
      <tr>
        <th style="text-align:center">Nome KPI</th>
        <th style="text-align:center">Intervallo</th>
        <th style="text-align:center">Valore</th>
        <th style="text-align:center">Ticket ID</th>
        <th style="text-align:center">Chiusura Ticket</th>
        <th style="text-align:center">Archiviato</th>
        <th style="text-align:center">Azione</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let row of ArchivedKpiBodyData; index as i">
        <td>{{row.name_kpi}}</td>
        <td>{{row.interval_kpi | date : "yyyy-MM-dd"}}</td>
        <td>{{row.value_kpi}}</td>
        <td>{{row.ticket_id}}</td>
        <td>{{row.close_timestamp_ticket | date : "yyyy-MM-dd"}}</td>
        <td>{{row.archived}}</td>
        <td align="center"><button class="btn btn-primary" data-toggle="modal" (click)="populateModalData(row)"
                                   data-target="#archivedKpiModal">Vedi</button></td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<div id="archivedKpiModal" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="classInfo" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="approveModalLabel">Valori per KPI: #KPI_NAME</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="table-responsive" style="background: #ffffff; padding: 10px">
          <table id="classTable" class="table table-bordered">
            <thead style="background: #E6E6E6">
            <tr>
              <th style="text-align:center">Nome KPI</th>
              <th style="text-align:center">Intervallo</th>
              <th style="text-align:center">Valore</th>
              <th style="text-align:center">Ticket ID</th>
              <th style="text-align:center">Chiusura Ticket</th>
              <th style="text-align:center">Archiviato</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let rec of kpisData">
              <td>{{rec.name_kpi}}</td>
              <td>{{rec.interval_kpi | date : "yyyy-MM-dd"}}</td>
              <td>{{rec.value_kpi}}</td>
              <td>{{rec.ticket_id}}</td>
              <td>{{rec.close_timestamp_ticket | date : "yyyy-MM-dd"}}</td>
              <td>{{rec.archived}}</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Chiudi</button>
      </div>
    </div>
  </div>
</div>

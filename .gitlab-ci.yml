stages:
    - build
    
before_script:
    - "ls"
    - "dotnet restore"

build:
    stage: build
    script:
        - "dotnet publish -c Release -o /opt/WorkFlowAPI/DotnetPublish/"
        - "systemctl stop supervisord"
        - "mv /opt/WorkFlowAPI/dotnetcore_modules/ /opt/WorkFlowAPI/dotnetcore_modules_backup/"
        - "mkdir /opt/WorkFlowAPI/dotnetcore_modules/" 
        - "cp -a /opt/WorkFlowAPI/DotnetPublish/. /opt/WorkFlowAPI/dotnetcore_modules/"
        - "systemctl start supervisord"

